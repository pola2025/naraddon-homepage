{
  "name": "NARADDON Homepage (React + Node.js + MongoDB)",
  "image": "mcr.microsoft.com/devcontainers/universal:linux", // Node.js 및 기본 도구가 포함된 안정적인 범용 이미지

  "features": {
    "ghcr.io/devcontainers/features/node:1": { // Node.js 18 버전 설치 (Feature 사용)
      "version": "18"
    }
    // MongoDB Features는 여기서 완전히 제거되어야 합니다! (이전 시도처럼 오류 유발 방지)
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "ms-azuretools.vscode-docker"
      ]
    }
  },

  "postCreateCommand": [
    "sudo apt-get update",
    "sudo apt-get install -y gnupg curl",
    "curl -fsSL https://www.mongodb.com/static/pgp/server-6.0.asc | sudo gpg -o /usr/share/keyrings/mongodb-archive-keyring.gpg --dearmor",
    "echo 'deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-archive-keyring.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org-6.0 multiverse' | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list",
    "sudo apt-get update",
    "sudo apt-get install -y mongodb-org-server mongodb-org-shell mongodb-org-tools", // MongoDB 서버, 셸, 도구 모두 설치
    "mkdir -p ~/data/db", // 사용자 홈 디렉토리 내에 데이터 폴더 생성 (권한 문제 방지)
    "nohup mongod --dbpath ~/data/db --port 27017 > ~/mongod.log 2>&1 &", // 백그라운드에서 실행, 로그는 홈 디렉토리에
    "echo 'MongoDB server started manually in background.'"
  ],
  "forwardPorts": [3000, 5000, 27017],
  "remoteUser": "codespace" // 코드스페이스 기본 사용자
}